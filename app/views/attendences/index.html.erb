


<section class="content-header">
  <h1 style="margin-left: 230px;float: left">
    Dashboard
    <small>Control panel</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i>Today Attendence</a></li>
    <li class="active"><%= link_to 'Back', :back %></li>

    <li class="active">Dashboard</li>

  </ol>
</section>


<br>


<div class="container  project-overflow">

  <div class="row">
    <div class="col-md-10 col-md-offset-2">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title"> Attendences </h3>

          <div class="box-tools">


            <div style="display:inline-block;float:left;margin-right: 10px; ">
              <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal">Find Attendence</button>
            </div>



          </div>

        </div>
      </div>

      <!-- /.box-header -->
      <div >
        <div class="box-body table-responsive  custom-style no-padding">
          <table class="table table-hover" style="background-color: white">
            <tbody>
            <tr>

              <th>Datee</th>
              <th>User id</th>
              <th>User Image</th>
              <th>User Name</th>

              <th>Check in</th>
              <th>Check out</th>
              <th>Status</th>
              <th colspan="3">Action</th>
            </tr>

            <% @attendences.each do |attendence| %>

              <tr>
                <td><%= attendence.datee.strftime("%d/%m/%Y %A") %></td>
                <td><%= attendence.user.id %></td>
                <td><%=image_tag(attendence.user.image.url,size:'40x40') if attendence.user.image.present?%></td>
                <td><%= attendence.user.name %></td>
                <td><%= attendence.check_in.strftime("%H:%M %S")  unless attendence.status == false %></td>


                <td><%= attendence.check_out.strftime("%H:%M %S ") if attendence.check_out.present?   %></td>
                <td><%= attendence.status %></td>

                <td> <%=link_to "Show",attendence_path(attendence),class:"btn btn-sm btn-primary", style:"color:white"%></td>
                <!--                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#Modal1"> Show <%# attendence %></button></td>-->
                <%#= link_to 'Show',find_monthly_attendence_attendences_path(attendence),class:"btn btn-default  btn-block"%>

                <%if current_user.role.name =="Admin" %>
                  <td><%= link_to 'Edit', edit_attendence_path(attendence),class:"btn btn-sm btn-warning",style:"color:white" %></td>
                  <td><%= link_to 'Destroy', attendence, method: :delete, data: { confirm: 'Are you sure?' } ,class:"btn btn-sm btn-danger",style:"color:white"%></td>

                <%end %>

                <!--            <td><span class="label label-success">Approved</span></td>-->
              </tr>
            <%end %>

            </tbody>
          </table>

        </div>
      </div>
      <!-- /.box-body -->
    </div>
    <!-- /.box -->
  </div>
</div>


  <!--------------------------  button is above Model for find Attendence Monthly ----------------------------->

<div style="margin-top:40px" class="container">

  <div class="modal fade" id="myModal"  role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Find Monthly Attendence</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">


          <%= form_tag find_employee_attendence_attendences_path, method: :get  do %>


            <%# debugger %>


            <div class="form-group">
              <label for="sel1">Month: </label>
              <select name="month" class="form-control" id="sel1">

                <option selected> Select Month</option>

                <option value="1"> January   </option>
                <option value="2"> faubery   </option>
                <option value="3"> March   </option>
                <option value="4"> April   </option>
                <option value="5"> May  </option>
                <option value="6"> June   </option>
                <option value="7"> July   </option>
                <option value="8"> Aguest   </option>
                <option value="9"> September   </option>
                <option value="10"> Octuber </option>
                <option value="11"> November </option>
                <option value="12"> December</option>

              </select>
            </div>


            <div class="form-group">
              <label for="sel1">Year: </label>
              <select name="year" class="form-control" id="sel1">

                <option selected> Select Year</option>

                <option value="2017"> 2017   </option>
                <option value="2018"> 2018  </option>
                <option value="2019"> 2019   </option>

              </select>
            </div>


            <div class="actions">
              <br>
              <%= submit_tag "find", class:"btn btn-info" %>
            </div>

          <% end %>

        </div>


        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>

</div>


<!--       find user monthly Attendence -->


<div style="margin-top:40px" class="container">
  <div class="modal fade" id="Modal1"  role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Find Attendence Monthly</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">


          <%= form_tag find_monthly_attendence_attendences_path, method: :get  do %>


            <%# debugger %>

            <div class="form-group">
              <label for="sel1">Month: </label>
              <select name="month" class="form-control" id="sel1">

                <option selected> Select Month</option>

                <option value="1"> January   </option>
                <option value="2"> faubery   </option>
                <option value="3"> March   </option>
                <option value="4"> April   </option>
                <option value="5"> May  </option>
                <option value="6"> June   </option>
                <option value="7"> July   </option>
                <option value="8"> Aguest   </option>
                <option value="9"> September   </option>
                <option value="10"> Octuber </option>
                <option value="11"> November </option>
                <option value="12"> December</option>

              </select>
            </div>


            <div class="form-group">
              <label for="sel1">Year: </label>
              <select name="year" class="form-control" id="sel1">

                <option selected> Select Year</option>

                <option value="2017"> 2017   </option>
                <option value="2018"> 2018  </option>
                <option value="2019"> 2019   </option>

              </select>
           </div>


            <div class="actions">
              <br>
              <%= submit_tag "find", class:"btn btn-info" %>
            </div>

          <% end %>

        </div>


        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>

</div>
